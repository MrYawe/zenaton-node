#!/usr/bin/env node
var program = require('commander');
var _ = require('lodash');

// var Command = require('./lib/Worker/Command');
var Command = require('zenaton-javascript');
var StartCommand =  Command.StartCommand;
var StopCommand = Command.StopCommand;
var StatusCommand = Command.StatusCommand;

program
   .version('0.0.1');

program
    .option('--env', 'Define location of your .env file')
    .option('--boot', 'Define location of your boot file')
    .command('start [env] --boot [boot]')
    .description('Start Zenaton worker')
    .action(function(env, boot) {

        if (!program.env) {
            env = null;
        }

        if (!program.boot) {
            boot = null;
        }

        (new StartCommand()).execute(env, boot);
    });

program
    .option('--env', 'Define location of your .env file')
    .command('stop [env]')
    .description('Stop the listening of Zenaton executable for this app/environment/language')
    .action(function(env) {


        if (!program.env) {
            env = null;
        }

        (new StopCommand()).execute(env);
    });


program
    .command('status')
    .description('List all the subscribed application of a worker.')
    .action(function() {
        (new StatusCommand().execute());
    });

 program.parse(process.argv);
